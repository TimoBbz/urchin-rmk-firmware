[keyboard]
name = "urchin-keyboard"
product_name = "Clavier Urchin"
vendor_id = 0x4c4b
product_id = 0x4643
manufacturer = "Timoth√©"
board = "nice!nano_v2"

[layout]
rows = 4
cols = 10
layers = 4
keymap = [
    [
        # Base
        [
            "Q",
            "W",
            "E",
            "R",
            "T",
            "Y",
            "U",
            "I",
            "O",
            "P",
        ],
        [
            "MT(A, LGui)",
            "MT(S, LAlt)",
            "MT(D, LCtrl)",
            "MT(F, LShift)",
            "G",
            "H",
            "MT(J, RShift)",
            "MT(K, RCtrl)",
            "MT(L, LAlt)",
            "MT(Semicolon, RGui)",
        ],
        [
            "Z",
            "X",
            "C",
            "V",
            "B",
            "N",
            "M",
            "Comma",
            "Dot",
            "Slash",
        ],
        [
            "_",
            "_",
            "_",
            "TD(0)",
            "TD(9)",
            "Enter",
            "Tab",
            "_",
            "_",
            "_",
        ],
    ],
    [
        # Navigation
        [
            "F9",
            "F10",
            "F11",
            "F12",
            "MouseBtn1",
            "Escape",
            "Home",
            "PageDown",
            "PageUp",
            "End",
        ],
        [
            "MT(F5, LGui)",
            "MT(F6, LAlt)",
            "MT(F7, LCtrl)",
            "MT(F8, LShift)",
            "MouseBtn3",
            "Backspace",
            "MT(Left, RShift)",
            "MT(Down, RCtrl)",
            "MT(Up, LAlt)",
            "MT(Right, LGui)",
        ],
        [
            "F1",
            "F2",
            "F3",
            "F4",
            "MouseBtn2",
            "Delete",
            "MouseLeft",
            "MouseDown",
            "MouseUp",
            "MouseRight",
        ],
        [
            "_",
            "_",
            "_",
            "TD(1)",
            "_",
            "_",
            "_",
            "_",
            "_",
            "_",
        ],
    ],
    [
        # Programming
        [
            "WM(Q, RAlt)",
            "WM(W, RAlt)",
            "WM(E, RAlt)",
            "WM(R, RAlt)",
            "WM(T, RAlt)",
            "Equal",
            "Kc7",
            "Kc8",
            "Kc9",
            "Kc0",
        ],
        [
            "TD(4)",
            "TD(5)",
            "TD(6)",
            "TD(7)",
            "WM(H, RAlt)",
            "Quote",
            "MT(Kc4, RShift)",
            "MT(Kc5, RCtrl)",
            "MT(Kc6, LAlt)",
            "MT(Minus, RGui)",
        ],
        [
            "Grave",
            "WM(X, RAlt)",
            "WM(C, RAlt)",
            "WM(V, RAlt)",
            "Backslash",
            "N",
            "Kc1",
            "Kc2",
            "Kc3",
            "Dot",
        ],
        [
            "_",
            "_",
            "_",
            "TD(1)",
            "_",
            "_",
            "TD(3)",
            "_",
            "_",
            "_",
        ],
    ],
    [
        # Peripherics
        [
            "User6",
            "User5",
            "No",
            "No",
            "No",
            "KbVolumeUp",
            "MediaPrevTrack",
            "MediaRewind",
            "MediaFastForward",
            "MediaNextTrack",
        ],
        [
            "No",
            "No",
            "No",
            "No",
            "No",
            "KbVolumeDown",
            "MediaPlayPause",
            "MediaStop",
            "MediaSelect",
            "BrightnessUp",
        ],
        [
            "No",
            "No",
            "No",
            "No",
            "No",
            "KbMute",
            "User0",
            "User1",
            "User2",
            "BrightnessDown",
        ],
        [
            "__",
            "__",
            "__",
            "No",
            "No",
            "No",
            "TO(2)",
            "__",
            "__",
            "__",
        ],
    ],
]

[storage]
clear_layout = true

[ble]
enabled = true

[behavior]
one_shot = { timeout = "10s" }

[behavior.morse]
enable_flow_tap = true
permissive_hold = true
prior_idle_time = "150ms"
hold_on_other_press = false
hold_timeout = "250ms"
gap_timeout = "250ms"
morses = [
    { tap = "TO(1)", hold = "MO(3)" },
    { tap = "TO(0)", hold = "MO(3)" },
    { tap = "Tab", hold = "TO(2)" },
    { tap = "Tab", hold = "RAlt" },
    { tap = "WM(A, RAlt)", hold = "LGui" },
    { tap = "WM(S, RAlt)", hold = "LAlt" },
    { tap = "WM(D, RAlt)", hold = "LCtrl" },
    { tap = "WM(F, RAlt)", hold = "LShift" },
    { tap = "WM(L, RAlt)", hold = "RGui" },
    { tap = "Space", hold = "CapsLock" },
]

[split]
connection = "ble"

[split.central]
rows = 4
cols = 5
row_offset = 0
col_offset = 0

[split.central.matrix]
row_pins = ["P1_00", "P0_11", "P1_04", "P1_06"]
col_pins = ["P1_15", "P1_13", "P1_11", "P0_10", "P0_09"]

[[split.peripheral]]
rows = 4
cols = 5
row_offset = 0
col_offset = 5

[split.peripheral.matrix]
row_pins = ["P1_13", "P1_11", "P0_10", "P0_09"]
col_pins = ["P0_24", "P1_00", "P0_11", "P1_04", "P1_06"]
